###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.3.10338/W32 for 8051         23/May/2017  09:08:09 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\Source\esp8266.c     #
#    Command line       =  -f D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\P #
#                          rojects\zstack\Samples\SampleApp\CC2530DB\..\..\.. #
#                          \Tools\CC2530DB\f8wEndev.cfg (-DCPU32MHZ           #
#                          -DROOT=__near_func -DMAC_CFG_TX_DATA_MAX=3         #
#                          -DMAC_CFG_TX_MAX=6 -DMAC_CFG_RX_MAX=3) -f          #
#                          D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\To #
#                          ols\CC2530DB\f8wConfig.cfg (-DZIGBEEPRO            #
#                          -DSECURE=0 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR       #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFF1                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 D:\1-Zigbee\Project5-10\Pro #
#                          ject\ZStack-2.5.1a\Projects\zstack\Samples\SampleA #
#                          pp\Source\esp8266.c -D NWK_AUTO_POLL -D ZTOOL_P1   #
#                          -D MT_TASK -D MT_SYS_FUNC -D MT_ZDO_FUNC -D        #
#                          LCD_SUPPORTED=DEBUG -lC D:\1-Zigbee\Project5-10\Pr #
#                          oject\ZStack-2.5.1a\Projects\zstack\Samples\Sample #
#                          App\CC2530DB\EndDeviceEB\List\ -lA                 #
#                          D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\EndDeviceEB #
#                          \List\ --diag_suppress Pe001,Pa010 -o              #
#                          D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\EndDeviceEB #
#                          \Obj\ -e --no_code_motion --debug --core=plain     #
#                          --dptr=16,1 --data_model=large                     #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I D:\1-Zigbee\Project5-10\Pr #
#                          oject\ZStack-2.5.1a\Projects\zstack\Samples\Sample #
#                          App\CC2530DB\ -I D:\1-Zigbee\Project5-10\Project\Z #
#                          Stack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2 #
#                          530DB\..\Source\ -I D:\1-Zigbee\Project5-10\Projec #
#                          t\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\ #
#                          CC2530DB\..\..\..\ZMain\TI2530DB\ -I               #
#                          D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\Components\hal\include\ -I                     #
#                          D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\Components\hal\target\CC2530EB\ -I             #
#                          D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\Components\mac\include\ -I                     #
#                          D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\Components\mac\high_level\ -I                  #
#                          D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\Components\mac\low_level\srf04\ -I             #
#                          D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\Components\mac\low_level\srf04\single_chip\    #
#                          -I D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\P #
#                          rojects\zstack\Samples\SampleApp\CC2530DB\..\..\.. #
#                          \..\..\Components\mt\ -I                           #
#                          D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\Components\osal\include\ -I                    #
#                          D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\Components\services\saddr\ -I                  #
#                          D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\Components\services\sdata\ -I                  #
#                          D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\Components\stack\af\ -I                        #
#                          D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\Components\stack\nwk\ -I                       #
#                          D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\Components\stack\sapi\ -I                      #
#                          D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\Components\stack\sec\ -I                       #
#                          D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\Components\stack\sys\ -I                       #
#                          D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\Components\stack\zdo\ -I                       #
#                          D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\Components\zmac\ -I D:\1-Zigbee\Project5-10\Pr #
#                          oject\ZStack-2.5.1a\Projects\zstack\Samples\Sample #
#                          App\CC2530DB\..\..\..\..\..\Components\zmac\f8w\   #
#                          -Ohz                                               #
#    List file          =  D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\EndDeviceEB #
#                          \List\esp8266.lst                                  #
#    Object file        =  D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\EndDeviceEB #
#                          \Obj\esp8266.r51                                   #
#                                                                             #
#                                                                             #
###############################################################################

D:\1-Zigbee\Project5-10\Project\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\Source\esp8266.c
      1          #include "esp8266.h"
      2          #include <string.h>
      3          //除了以上的头文件，需要用到cc2530的串口、延时头文件
      4          #include "hal_uart.h"
      5          #include "Onboard.h"
      6          
      7          //硬件复位函数
      8          //esp8266低电平复位，此函数把复位引脚拉低100ms左右再拉高延时1s左右

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
      9          void ESP8266_Rst(void)
   \                     ESP8266_Rst:
     10          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
     11            //定义cc2530控制复位的引脚
     12            //设置引脚为低电平
     13            //延时100ms左右
     14            //设置引脚为高电平
     15            //延时1s左右
     16            
     17          }
   \   000000   02....       LJMP    ?BRET
     18          
     19          
     20          //初始化函数
     21          /*初始化函数主要对WiFi模块进行配置，一般修改路由器连接和服务器连接的参数即可，其他
     22          参数保持默认即可*/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     23          void ESP8266_Init1(void)
   \                     ESP8266_Init1:
     24          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
     25          //  ESP8266_Rst();//硬件复位
     26            
     27            ESP8266_DelayMs(1000);
   \   000005                ; Setup parameters for call to function ESP8266_DelayMs
   \   000005   7AE8         MOV     R2,#-0x18
   \   000007   7B03         MOV     R3,#0x3
   \   000009   12....       LCALL   ?Subroutine3 & 0xFFFF
     28            
     29            SendCmd(AT,"OK",10);//进入AT指令并进行相关配置		
   \                     ??CrossCallReturnLabel_9:
   \   00000C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00000F   7C..         MOV     R4,#`?<Constant "OK">` & 0xff
   \   000011   7D..         MOV     R5,#(`?<Constant "OK">` >> 8) & 0xff
   \   000013   7A..         MOV     R2,#`?<Constant "AT\\r\\n">` & 0xff
   \   000015   7B..         MOV     R3,#(`?<Constant "AT\\r\\n">` >> 8) & 0xff
   \   000017   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_0:
   \   00001A   12....       LCALL   ?DEALLOC_XSTACK8
     30            
     31            ESP8266_DelayMs(100);
   \   00001D                ; Setup parameters for call to function ESP8266_DelayMs
   \   00001D   7A64         MOV     R2,#0x64
   \   00001F   7B00         MOV     R3,#0x0
   \   000021   12....       LCALL   ??ESP8266_DelayMs?relay
     32            
     33            SendCmd(CWMODE,"OK",10);	
   \   000024                ; Setup parameters for call to function SendCmd
   \   000024   78..         MOV     R0,#?V0 + 0
   \   000026   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000029   7C..         MOV     R4,#`?<Constant "OK">` & 0xff
   \   00002B   7D..         MOV     R5,#(`?<Constant "OK">` >> 8) & 0xff
   \   00002D   7A..         MOV     R2,#`?<Constant "AT+CWMODE=3\\r\\n">` & 0xff
   \   00002F   7B..         MOV     R3,#(`?<Constant "AT+CWMODE=3\\r\\n">` >> 8) & 0xff
   \   000031   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_1:
   \   000034   12....       LCALL   ?DEALLOC_XSTACK8
     34            
     35            ESP8266_DelayMs(100);
   \   000037                ; Setup parameters for call to function ESP8266_DelayMs
   \   000037   7A64         MOV     R2,#0x64
   \   000039   7B00         MOV     R3,#0x0
   \   00003B   12....       LCALL   ??ESP8266_DelayMs?relay
     36            
     37            SendCmd(RST,"OK",20);	
   \   00003E                ; Setup parameters for call to function SendCmd
   \   00003E   75..14       MOV     ?V0 + 0,#0x14
   \   000041   78..         MOV     R0,#?V0 + 0
   \   000043   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000046   7C..         MOV     R4,#`?<Constant "OK">` & 0xff
   \   000048   7D..         MOV     R5,#(`?<Constant "OK">` >> 8) & 0xff
   \   00004A   7A..         MOV     R2,#`?<Constant "AT+RST\\r\\n">` & 0xff
   \   00004C   7B..         MOV     R3,#(`?<Constant "AT+RST\\r\\n">` >> 8) & 0xff
   \   00004E   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_2:
   \   000051   12....       LCALL   ?DEALLOC_XSTACK8
     38            
     39            ESP8266_DelayMs(1000);
   \   000054                ; Setup parameters for call to function ESP8266_DelayMs
   \   000054   7AE8         MOV     R2,#-0x18
   \   000056   7B03         MOV     R3,#0x3
   \   000058   12....       LCALL   ??ESP8266_DelayMs?relay
     40          
     41            SendCmd(CWSAP,"OK",200);
   \   00005B                ; Setup parameters for call to function SendCmd
   \   00005B   75..C8       MOV     ?V0 + 0,#-0x38
   \   00005E   78..         MOV     R0,#?V0 + 0
   \   000060   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000063   7C..         MOV     R4,#`?<Constant "OK">` & 0xff
   \   000065   7D..         MOV     R5,#(`?<Constant "OK">` >> 8) & 0xff
   \   000067   7A..         MOV     R2,#`?<Constant "AT+CWSAP=\\"ljx\\",\\"12345...">` & 0xff
   \   000069   7B..         MOV     R3,#(`?<Constant "AT+CWSAP=\\"ljx\\",\\"12345...">` >> 8) & 0xff
   \   00006B   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_3:
   \   00006E   12....       LCALL   ?DEALLOC_XSTACK8
     42            
     43            ESP8266_DelayMs(1000);
   \   000071                ; Setup parameters for call to function ESP8266_DelayMs
   \   000071   7AE8         MOV     R2,#-0x18
   \   000073   7B03         MOV     R3,#0x3
   \   000075   12....       LCALL   ??ESP8266_DelayMs?relay
     44            
     45          //  SendCmd(CIPSTART,"OK",100);
     46            SendCmd(CIPMUX,"OK",100);
   \   000078                ; Setup parameters for call to function SendCmd
   \   000078   75..64       MOV     ?V0 + 0,#0x64
   \   00007B   78..         MOV     R0,#?V0 + 0
   \   00007D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000080   7C..         MOV     R4,#`?<Constant "OK">` & 0xff
   \   000082   7D..         MOV     R5,#(`?<Constant "OK">` >> 8) & 0xff
   \   000084   7A..         MOV     R2,#`?<Constant "AT+CIPMUX=1\\n">` & 0xff
   \   000086   7B..         MOV     R3,#(`?<Constant "AT+CIPMUX=1\\n">` >> 8) & 0xff
   \   000088   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_4:
   \   00008B   12....       LCALL   ?DEALLOC_XSTACK8
     47            
     48            ESP8266_DelayMs(1000);
   \   00008E                ; Setup parameters for call to function ESP8266_DelayMs
   \   00008E   7AE8         MOV     R2,#-0x18
   \   000090   7B03         MOV     R3,#0x3
   \   000092   12....       LCALL   ??ESP8266_DelayMs?relay
     49            
     50          //  SendCmd(CIPMODE,"OK",10);
     51            SendCmd(CIPSTO,"OK",100);
   \   000095                ; Setup parameters for call to function SendCmd
   \   000095   78..         MOV     R0,#?V0 + 0
   \   000097   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00009A   7C..         MOV     R4,#`?<Constant "OK">` & 0xff
   \   00009C   7D..         MOV     R5,#(`?<Constant "OK">` >> 8) & 0xff
   \   00009E   7A..         MOV     R2,#`?<Constant "AT+CIPSTO=2880\\n">` & 0xff
   \   0000A0   7B..         MOV     R3,#(`?<Constant "AT+CIPSTO=2880\\n">` >> 8) & 0xff
   \   0000A2   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_5:
   \   0000A5   12....       LCALL   ?DEALLOC_XSTACK8
     52            
     53             ESP8266_DelayMs(1000);
   \   0000A8                ; Setup parameters for call to function ESP8266_DelayMs
   \   0000A8   7AE8         MOV     R2,#-0x18
   \   0000AA   7B03         MOV     R3,#0x3
   \   0000AC   12....       LCALL   ??ESP8266_DelayMs?relay
     54            
     55             SendCmd(SERVER,"OK",100);
   \   0000AF                ; Setup parameters for call to function SendCmd
   \   0000AF   78..         MOV     R0,#?V0 + 0
   \   0000B1   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000B4   7C..         MOV     R4,#`?<Constant "OK">` & 0xff
   \   0000B6   7D..         MOV     R5,#(`?<Constant "OK">` >> 8) & 0xff
   \   0000B8   7A..         MOV     R2,#`?<Constant "AT+CIPSERVER=1,8080\\n">` & 0xff
   \   0000BA   7B..         MOV     R3,#(`?<Constant "AT+CIPSERVER=1,8080\\n">` >> 8) & 0xff
   \   0000BC   02....       LJMP    ?Subroutine0 & 0xFFFF
     56          
     57          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   12....       LCALL   ??SendCmd?relay
   \   000003   7402         MOV     A,#0x2
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_8:
   \   000003   12....       LCALL   ?DEALLOC_XSTACK8
   \   000006                REQUIRE ??Subroutine4_0
   \   000006                ; // Fall through to label ??Subroutine4_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine4_0:
   \   000000   7F02         MOV     R7,#0x2
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   12....       LCALL   ??ESP8266_DelayMs?relay
   \   000003                ; Setup parameters for call to function SendCmd
   \   000003                ; Setup parameters for call to function SendCmd
   \   000003   75..0A       MOV     ?V0 + 0,#0xa
   \   000006   75..00       MOV     ?V0 + 1,#0x0
   \   000009   78..         MOV     R0,#?V0 + 0
   \   00000B   22           RET
     58          //发送AT指令函数
     59          /**
     60          功能：发送一条AT指令，返回1应答成功，0应答失败
     61          输入参数：
     62          cmd:待发送的指令
     63          result：期待返回的结果
     64          timeout：超时等待时间，步进为100ms
     65          输出:1，应答成功；0，应答失败
     66          */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     67          uint8 SendCmd(char* cmd, char* result, int timeOut)//AT指令，包含应答和超时等待
   \                     SendCmd:
     68          {
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 1026
   \   000005   7582FE       MOV     DPL,#-0x2
   \   000008   7583FB       MOV     DPH,#-0x5
   \   00000B   12....       LCALL   ?ADD_XSTACK_DISP0_16
   \   00000E   8A..         MOV     ?V0 + 2,R2
   \   000010   8B..         MOV     ?V0 + 3,R3
   \   000012   EC           MOV     A,R4
   \   000013   FE           MOV     R6,A
   \   000014   ED           MOV     A,R5
   \   000015   FF           MOV     R7,A
   \   000016   758210       MOV     DPL,#0x10
   \   000019   758304       MOV     DPH,#0x4
   \   00001C   12....       LCALL   ?XSTACK_DISP0_16
   \   00001F   E0           MOVX    A,@DPTR
   \   000020   F5..         MOV     ?V0 + 0,A
   \   000022   A3           INC     DPTR
   \   000023   E0           MOVX    A,@DPTR
   \   000024   F5..         MOV     ?V0 + 1,A
     69            unsigned char buf[1024]={'0'};
   \   000026   7402         MOV     A,#0x2
   \   000028   12....       LCALL   ?XSTACK_DISP0_8
   \   00002B   AC82         MOV     R4,DPL
   \   00002D   AD83         MOV     R5,DPH
   \   00002F   7583..       MOV     DPH,#(`?<Constant {48}>` >> 8) & 0xff
   \   000032   7582..       MOV     DPL,#`?<Constant {48}>` & 0xff
   \   000035   7400         MOV     A,#0x400
   \   000037   7B05         MOV     R3,#0x5
   \   000039   12....       LCALL   ?MOVE_LONG16_XDATA_XDATA
     70            uint16 len=0;
   \   00003C   85..82       MOV     DPL,?XSP + 0
   \   00003F   85..83       MOV     DPH,?XSP + 1
   \   000042   F0           MOVX    @DPTR,A
   \   000043   A3           INC     DPTR
   \   000044   F0           MOVX    @DPTR,A
     71            ESP8266_ReceiveData(buf,&len);//读取数据，把之前的数据清零
   \   000045                ; Setup parameters for call to function ESP8266_ReceiveData
   \   000045   85..82       MOV     DPL,?XSP + 0
   \   000048   85..83       MOV     DPH,?XSP + 1
   \   00004B   AC82         MOV     R4,DPL
   \   00004D   AD83         MOV     R5,DPH
   \   00004F   7402         MOV     A,#0x2
   \   000051   12....       LCALL   ?XSTACK_DISP0_8
   \   000054   AA82         MOV     R2,DPL
   \   000056   AB83         MOV     R3,DPH
   \   000058   12....       LCALL   ??ESP8266_ReceiveData?relay
     72            memset(buf,0,sizeof(buf));//清除数据
   \   00005B                ; Setup parameters for call to function memset
   \   00005B   75..00       MOV     ?V0 + 4,#0x0
   \   00005E   75..04       MOV     ?V0 + 5,#0x4
   \   000061   78..         MOV     R0,#?V0 + 4
   \   000063   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000066   7C00         MOV     R4,#0x0
   \   000068   7D00         MOV     R5,#0x0
   \   00006A   7404         MOV     A,#0x4
   \   00006C   12....       LCALL   ?XSTACK_DISP0_8
   \   00006F   AA82         MOV     R2,DPL
   \   000071   AB83         MOV     R3,DPH
   \   000073   12....       LCALL   ??memset?relay
   \   000076   7402         MOV     A,#0x2
   \   000078   12....       LCALL   ?DEALLOC_XSTACK8
     73            len=0;
   \   00007B   85..82       MOV     DPL,?XSP + 0
   \   00007E   85..83       MOV     DPH,?XSP + 1
   \   000081   E4           CLR     A
   \   000082   F0           MOVX    @DPTR,A
   \   000083   A3           INC     DPTR
   \   000084   F0           MOVX    @DPTR,A
     74            if(NULL != cmd) //不发送只等待
   \   000085   E5..         MOV     A,?V0 + 2
   \   000087   45..         ORL     A,?V0 + 3
   \   000089   6017         JZ      ??SendCmd_0
     75            {
     76              ESP8266_SendData((const unsigned char *)buf,strlen((const char *)cmd)); //发送数据
   \   00008B                ; Setup parameters for call to function ESP8266_SendData
   \   00008B                ; Setup parameters for call to function strlen
   \   00008B   AA..         MOV     R2,?V0 + 2
   \   00008D   AB..         MOV     R3,?V0 + 3
   \   00008F   12....       LCALL   ??strlen?relay
   \   000092   EA           MOV     A,R2
   \   000093   FC           MOV     R4,A
   \   000094   EB           MOV     A,R3
   \   000095   FD           MOV     R5,A
   \   000096   7402         MOV     A,#0x2
   \   000098   12....       LCALL   ?XSTACK_DISP0_8
   \   00009B   AA82         MOV     R2,DPL
   \   00009D   AB83         MOV     R3,DPH
   \   00009F   12....       LCALL   ??ESP8266_SendData?relay
     77            }
     78            else 
     79            {
     80              ;
     81            }
     82            
     83            if(NULL == result)//不用等待
   \                     ??SendCmd_0:
   \   0000A2   EE           MOV     A,R6
   \   0000A3   4F           ORL     A,R7
   \   0000A4   7004         JNZ     ??SendCmd_1
     84            {
     85              return 1;
   \                     ??SendCmd_2:
   \   0000A6   7901         MOV     R1,#0x1
   \   0000A8   8065         SJMP    ??SendCmd_3
     86            }
     87            else
     88            {
     89              ;
     90            }
     91            do
     92            {
     93              ESP8266_DelayMs(100);
   \                     ??SendCmd_1:
   \   0000AA                ; Setup parameters for call to function ESP8266_DelayMs
   \   0000AA   7A64         MOV     R2,#0x64
   \   0000AC   7B00         MOV     R3,#0x0
   \   0000AE   12....       LCALL   ??ESP8266_DelayMs?relay
     94              ESP8266_ReceiveData(buf,&len);
   \   0000B1                ; Setup parameters for call to function ESP8266_ReceiveData
   \   0000B1   85..82       MOV     DPL,?XSP + 0
   \   0000B4   85..83       MOV     DPH,?XSP + 1
   \   0000B7   AC82         MOV     R4,DPL
   \   0000B9   AD83         MOV     R5,DPH
   \   0000BB   7402         MOV     A,#0x2
   \   0000BD   12....       LCALL   ?XSTACK_DISP0_8
   \   0000C0   AA82         MOV     R2,DPL
   \   0000C2   AB83         MOV     R3,DPH
   \   0000C4   12....       LCALL   ??ESP8266_ReceiveData?relay
     95              if(len >= strlen(result)) //收到数据
   \   0000C7                ; Setup parameters for call to function strlen
   \   0000C7   EE           MOV     A,R6
   \   0000C8   FA           MOV     R2,A
   \   0000C9   EF           MOV     A,R7
   \   0000CA   FB           MOV     R3,A
   \   0000CB   12....       LCALL   ??strlen?relay
   \   0000CE   8A..         MOV     ?V0 + 2,R2
   \   0000D0   8B..         MOV     ?V0 + 3,R3
   \   0000D2   A8..         MOV     R0,?V0 + 2
   \   0000D4   A9..         MOV     R1,?V0 + 3
   \   0000D6   85..82       MOV     DPL,?XSP + 0
   \   0000D9   85..83       MOV     DPH,?XSP + 1
   \   0000DC   C3           CLR     C
   \   0000DD   E0           MOVX    A,@DPTR
   \   0000DE   98           SUBB    A,R0
   \   0000DF   A3           INC     DPTR
   \   0000E0   E0           MOVX    A,@DPTR
   \   0000E1   99           SUBB    A,R1
   \   0000E2   4017         JC      ??SendCmd_4
     96              {
     97                if(NULL != strstr((const char *)buf,(const char *)result))//和预期结果一样
   \   0000E4                ; Setup parameters for call to function strstr
   \   0000E4   EE           MOV     A,R6
   \   0000E5   FC           MOV     R4,A
   \   0000E6   EF           MOV     A,R7
   \   0000E7   FD           MOV     R5,A
   \   0000E8   7402         MOV     A,#0x2
   \   0000EA   12....       LCALL   ?XSTACK_DISP0_8
   \   0000ED   AA82         MOV     R2,DPL
   \   0000EF   AB83         MOV     R3,DPH
   \   0000F1   12....       LCALL   ??strstr?relay
   \   0000F4   8B..         MOV     ?V0 + 3,R3
   \   0000F6   EA           MOV     A,R2
   \   0000F7   45..         ORL     A,?V0 + 3
   \   0000F9   70AB         JNZ     ??SendCmd_2
     98                {
     99                  return 1;
    100                }
    101                else
    102                {
    103                  ;
    104                }
    105              }
    106            }
    107            while(timeOut--);
   \                     ??SendCmd_4:
   \   0000FB   A8..         MOV     R0,?V0 + 0
   \   0000FD   A9..         MOV     R1,?V0 + 1
   \   0000FF   E8           MOV     A,R0
   \   000100   24FF         ADD     A,#-0x1
   \   000102   F5..         MOV     ?V0 + 0,A
   \   000104   E9           MOV     A,R1
   \   000105   34FF         ADDC    A,#-0x1
   \   000107   F5..         MOV     ?V0 + 1,A
   \   000109   E8           MOV     A,R0
   \   00010A   49           ORL     A,R1
   \   00010B   709D         JNZ     ??SendCmd_1
    108            return 0;
   \   00010D   7900         MOV     R1,#0x0
   \                     ??SendCmd_3:
   \   00010F   758202       MOV     DPL,#0x2
   \   000112   758304       MOV     DPH,#0x4
   \   000115   12....       LCALL   ?ADD_XSTACK_DISP0_16
   \   000118   7F06         MOV     R7,#0x6
   \   00011A   02....       LJMP    ?BANKED_LEAVE_XDATA
    109          
    110          }
    111          //检测WiFi模块是否连接
    112          //返回1表示连接成功，0表示没连接

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    113          char ESP8266_CheckStatus(uint16 timeOut)//检测WiFi模块是否连接
   \                     ESP8266_CheckStatus:
    114          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0 + 0,R2
   \   000007   8B..         MOV     ?V0 + 1,R3
    115            char res=0;
    116            ESP8266_IntoAtCmd();
   \   000009                ; Setup parameters for call to function ESP8266_IntoAtCmd
   \   000009   12....       LCALL   ??ESP8266_IntoAtCmd?relay
    117            res=SendCmd(CIPSTATUS, "STATUS:3", timeOut);
    118            return res;
   \   00000C                ; Setup parameters for call to function SendCmd
   \   00000C   78..         MOV     R0,#?V0 + 0
   \   00000E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000011   7C..         MOV     R4,#`?<Constant "STATUS:3">` & 0xff
   \   000013   7D..         MOV     R5,#(`?<Constant "STATUS:3">` >> 8) & 0xff
   \   000015   7A..         MOV     R2,#`?<Constant "AT+CIPSTATUS\\r\\n">` & 0xff
   \   000017   7B..         MOV     R3,#(`?<Constant "AT+CIPSTATUS\\r\\n">` >> 8) & 0xff
   \   000019   02....       LJMP    ?Subroutine0 & 0xFFFF
    119          }
    120          
    121          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    122          void ESP8266_SendData(const unsigned char *send_buf,uint16 buflen)//芯片发送数据给WiFi模块
   \                     ESP8266_SendData:
    123          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    124            HalUARTWrite(0, (uint8 *)send_buf, buflen);
   \   000004                ; Setup parameters for call to function HalUARTWrite
   \   000004   7900         MOV     R1,#0x0
   \   000006   12....       LCALL   ??HalUARTWrite?relay
    125          }
   \   000009   D083         POP     DPH
   \   00000B   D082         POP     DPL
   \   00000D   02....       LJMP    ?BRET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    126          void ESP8266_ReceiveData(unsigned char *receive_buf,uint16 *buflen)//芯片读取WiFi模块发送过来的数据
   \                     ESP8266_ReceiveData:
    127          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   EC           MOV     A,R4
   \   000006   FE           MOV     R6,A
   \   000007   ED           MOV     A,R5
   \   000008   FF           MOV     R7,A
    128            *buflen= HalUARTRead(0, (uint8 *)receive_buf,sizeof(receive_buf));
   \   000009                ; Setup parameters for call to function HalUARTRead
   \   000009   7C02         MOV     R4,#0x2
   \   00000B   7D00         MOV     R5,#0x0
   \   00000D   7900         MOV     R1,#0x0
   \   00000F   12....       LCALL   ??HalUARTRead?relay
   \   000012   8E82         MOV     DPL,R6
   \   000014   8F83         MOV     DPH,R7
   \   000016   EA           MOV     A,R2
   \   000017   F0           MOVX    @DPTR,A
   \   000018   A3           INC     DPTR
   \   000019   EB           MOV     A,R3
   \   00001A   F0           MOVX    @DPTR,A
    129          }
   \   00001B                REQUIRE ?Subroutine1
   \   00001B                ; // Fall through to label ?Subroutine1

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   7F01         MOV     R7,#0x1
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    130          void ESP8266_IntoAtCmd(void)//进入AT指令模式
   \                     ESP8266_IntoAtCmd:
    131          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    132            uint8 flag=0;
    133            do
    134            {
    135              flag=SendCmd("+++", "+++",5); //进入AT模式
    136            }
    137            while(!flag);
   \                     ??ESP8266_IntoAtCmd_0:
   \   000005   7C..         MOV     R4,#`?<Constant "+++">` & 0xff
   \   000007   7D..         MOV     R5,#(`?<Constant "+++">` >> 8) & 0xff
   \   000009                ; Setup parameters for call to function SendCmd
   \   000009   75..05       MOV     ?V0 + 0,#0x5
   \   00000C   75..00       MOV     ?V0 + 1,#0x0
   \   00000F   78..         MOV     R0,#?V0 + 0
   \   000011   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000014   7A..         MOV     R2,#`?<Constant "+++">` & 0xff
   \   000016   7B..         MOV     R3,#(`?<Constant "+++">` >> 8) & 0xff
   \   000018   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_6:
   \   00001B   12....       LCALL   ?DEALLOC_XSTACK8
   \   00001E   E9           MOV     A,R1
   \   00001F   60E4         JZ      ??ESP8266_IntoAtCmd_0
    138          }
   \   000021   80..         SJMP    ??Subroutine4_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    139          void ESP8266_IntoCIPSEND(void)//进入透传模式
   \                     ESP8266_IntoCIPSEND:
    140          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    141            ESP8266_IntoAtCmd(); //进入AT模式
   \   000005                ; Setup parameters for call to function ESP8266_IntoAtCmd
   \   000005   12....       LCALL   ??ESP8266_IntoAtCmd?relay
    142            ESP8266_DelayMs(100);//延时函数
   \   000008                ; Setup parameters for call to function ESP8266_DelayMs
   \   000008   7A64         MOV     R2,#0x64
   \   00000A   7B00         MOV     R3,#0x0
   \   00000C   12....       LCALL   ?Subroutine3 & 0xFFFF
    143            SendCmd("AT+CIPMODE=1\r\n", "OK",10); //"设置透传模式"
   \                     ??CrossCallReturnLabel_10:
   \   00000F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000012   7C..         MOV     R4,#`?<Constant "OK">` & 0xff
   \   000014   7D..         MOV     R5,#(`?<Constant "OK">` >> 8) & 0xff
   \   000016   7A..         MOV     R2,#`?<Constant "AT+CIPMODE=1\\r\\n">` & 0xff
   \   000018   7B..         MOV     R3,#(`?<Constant "AT+CIPMODE=1\\r\\n">` >> 8) & 0xff
   \   00001A   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_7:
   \   00001D   12....       LCALL   ?DEALLOC_XSTACK8
    144            SendCmd("AT+CIPSEND\r\n", ">",10);//进入透传模式，可以开始传输数据
   \   000020                ; Setup parameters for call to function SendCmd
   \   000020   78..         MOV     R0,#?V0 + 0
   \   000022   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000025   7C..         MOV     R4,#`?<Constant ">">` & 0xff
   \   000027   7D..         MOV     R5,#(`?<Constant ">">` >> 8) & 0xff
   \   000029   7A..         MOV     R2,#`?<Constant "AT+CIPSEND\\r\\n">` & 0xff
   \   00002B   7B..         MOV     R3,#(`?<Constant "AT+CIPSEND\\r\\n">` >> 8) & 0xff
   \   00002D                REQUIRE ?Subroutine0
   \   00002D                ; // Fall through to label ?Subroutine0
    145          }
    146          
    147          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    148          static void ESP8266_DelayMs(uint16 time)//延时函数
   \                     ESP8266_DelayMs:
    149          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   800E         SJMP    ??ESP8266_DelayMs_0
    150            while(time)
    151            {
    152              MicroWait (1000);     // Wait 1ms
   \                     ??ESP8266_DelayMs_1:
   \   00000A                ; Setup parameters for call to function Onboard_wait
   \   00000A   7AE8         MOV     R2,#-0x18
   \   00000C   7B03         MOV     R3,#0x3
   \   00000E   12....       LCALL   ??Onboard_wait?relay
    153              time--;
   \   000011   EE           MOV     A,R6
   \   000012   24FF         ADD     A,#-0x1
   \   000014   1E           DEC     R6
   \   000015   EF           MOV     A,R7
   \   000016   34FF         ADDC    A,#-0x1
   \                     ??ESP8266_DelayMs_0:
   \   000018   FF           MOV     R7,A
    154            }
   \   000019   EE           MOV     A,R6
   \   00001A   4F           ORL     A,R7
   \   00001B   70ED         JNZ     ??ESP8266_DelayMs_1
    155            
    156          }
   \   00001D   02....       LJMP    ?Subroutine1 & 0xFFFF
    157          
    158          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    159          void ESP8266_SendDataToService(const unsigned char *send_buf,uint16 buflen)//芯片发送数据给WiFi模块，透传模式
   \                     ESP8266_SendDataToService:
    160          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
   \   000009   8C..         MOV     ?V0 + 0,R4
   \   00000B   8D..         MOV     ?V0 + 1,R5
    161            ESP8266_IntoCIPSEND();//进入透传模式
   \   00000D                ; Setup parameters for call to function ESP8266_IntoCIPSEND
   \   00000D   12....       LCALL   ??ESP8266_IntoCIPSEND?relay
    162            ESP8266_DelayMs(100);//延时函数
   \   000010                ; Setup parameters for call to function ESP8266_DelayMs
   \   000010   7A64         MOV     R2,#0x64
   \   000012   7B00         MOV     R3,#0x0
   \   000014   12....       LCALL   ??ESP8266_DelayMs?relay
    163            ESP8266_SendData(send_buf,buflen);
   \   000017                ; Setup parameters for call to function ESP8266_SendData
   \   000017   AC..         MOV     R4,?V0 + 0
   \   000019   AD..         MOV     R5,?V0 + 1
   \   00001B   EE           MOV     A,R6
   \   00001C   FA           MOV     R2,A
   \   00001D   EF           MOV     A,R7
   \   00001E   FB           MOV     R3,A
   \   00001F   12....       LCALL   ??ESP8266_SendData?relay
    164            ESP8266_DelayMs(300);//延时函数
   \   000022                ; Setup parameters for call to function ESP8266_DelayMs
   \   000022   7A2C         MOV     R2,#0x2c
   \   000024   7B01         MOV     R3,#0x1
   \   000026   12....       LCALL   ??ESP8266_DelayMs?relay
    165            
    166          }
   \   000029   80..         SJMP    ??Subroutine4_0
    167          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    168          void ESP8266_Test(void)//测试
   \                     ESP8266_Test:
    169          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    170            while(1)
    171            {
    172              ESP8266_Init();
                     ^
Warning[Pe223]: function "ESP8266_Init" declared implicitly
   \                     ??ESP8266_Test_0:
   \   000004                ; Setup parameters for call to function ESP8266_Init
   \   000004   12....       LCALL   ??ESP8266_Init?relay
    173              ESP8266_DelayMs(1000);//延时函数
   \   000007                ; Setup parameters for call to function ESP8266_DelayMs
   \   000007   7AE8         MOV     R2,#-0x18
   \   000009   7B03         MOV     R3,#0x3
   \   00000B   12....       LCALL   ??ESP8266_DelayMs?relay
   \   00000E   80F4         SJMP    ??ESP8266_Test_0
    174            }
    175          }

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ESP8266_Rst?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ESP8266_Rst

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ESP8266_Init1?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ESP8266_Init1

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SendCmd?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SendCmd

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ESP8266_CheckStatus?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ESP8266_CheckStatus

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ESP8266_SendData?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ESP8266_SendData

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ESP8266_ReceiveData?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ESP8266_ReceiveData

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ESP8266_IntoAtCmd?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ESP8266_IntoAtCmd

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ESP8266_IntoCIPSEND?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ESP8266_IntoCIPSEND

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ESP8266_DelayMs?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ESP8266_DelayMs

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ESP8266_SendDataToService?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ESP8266_SendDataToService

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ESP8266_Test?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ESP8266_Test

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "AT\\r\\n">`:
   \   000000   41540D0A     DB "AT\015\012"
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "OK">`:
   \   000000   4F4B00       DB "OK"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "AT+CWMODE=3\\r\\n">`:
   \   000000   41542B43     DB "AT+CWMODE=3\015\012"
   \            574D4F44
   \            453D330D
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "AT+RST\\r\\n">`:
   \   000000   41542B52     DB "AT+RST\015\012"
   \            53540D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "AT+CWSAP=\\"ljx\\",\\"12345...">`:
   \   000000   41542B43     DB "AT+CWSAP=\"ljx\",\"12345678\",1,3\012"
   \            57534150
   \            3D226C6A
   \            78222C22
   \            31323334
   \            35363738
   \            222C312C
   \            330A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "AT+CIPMUX=1\\n">`:
   \   000000   41542B43     DB "AT+CIPMUX=1\012"
   \            49504D55
   \            583D310A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "AT+CIPSTO=2880\\n">`:
   \   000000   41542B43     DB "AT+CIPSTO=2880\012"
   \            49505354
   \            4F3D3238
   \            38300A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "AT+CIPSERVER=1,8080\\n">`:
   \   000000   41542B43     DB "AT+CIPSERVER=1,8080\012"
   \            49505345
   \            52564552
   \            3D312C38
   \            3038300A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {48}>`:
   \   000000   30           DB 48
   \   000001   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000009   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000011   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000019   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000021   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000029   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000031   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000039   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000041   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000049   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000051   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000059   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000061   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000069   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000071   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000079   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000081   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000089   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000091   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000099   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000A1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000A9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000B1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000B9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000C1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000C9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000D1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000D9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000E1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000E9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000F1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000F9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000101   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000109   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000111   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000119   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000121   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000129   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000131   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000139   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000141   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000149   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000151   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000159   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000161   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000169   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000171   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000179   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000181   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000189   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000191   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000199   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0001A1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0001A9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0001B1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0001B9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0001C1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0001C9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0001D1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0001D9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0001E1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0001E9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0001F1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0001F9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000201   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000209   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000211   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000219   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000221   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000229   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000231   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000239   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000241   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000249   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000251   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000259   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000261   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000269   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000271   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000279   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000281   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000289   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000291   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000299   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0002A1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0002A9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0002B1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0002B9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0002C1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0002C9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0002D1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0002D9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0002E1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0002E9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0002F1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0002F9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000301   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000309   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000311   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000319   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000321   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000329   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000331   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000339   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000341   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000349   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000351   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000359   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000361   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000369   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000371   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000379   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000381   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000389   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000391   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000399   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0003A1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0003A9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0003B1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0003B9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0003C1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0003C9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0003D1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0003D9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0003E1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0003E9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0003F1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0003F9   00000000     DB 0, 0, 0, 0, 0, 0, 0
   \            000000  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "AT+CIPSTATUS\\r\\n">`:
   \   000000   41542B43     DB "AT+CIPSTATUS\015\012"
   \            49505354
   \            41545553
   \            0D0A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "STATUS:3">`:
   \   000000   53544154     DB "STATUS:3"
   \            55533A33
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "+++">`:
   \   000000   2B2B2B00     DB "+++"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "AT+CIPMODE=1\\r\\n">`:
   \   000000   41542B43     DB "AT+CIPMODE=1\015\012"
   \            49504D4F
   \            44453D31
   \            0D0A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "AT+CIPSEND\\r\\n">`:
   \   000000   41542B43     DB "AT+CIPSEND\015\012"
   \            49505345
   \            4E440D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant ">">`:
   \   000000   3E00         DB ">"

   Maximum stack usage in bytes:

     Function                  ISTACK PSTACK XSTACK
     --------                  ------ ------ ------
     ESP8266_CheckStatus           0      0     12
       -> ESP8266_IntoAtCmd        0      0     20
       -> SendCmd                  0      0     24
     ESP8266_DelayMs               0      0   1049
       -> Onboard_wait             0      0     18
     ESP8266_Init1                 0      0     12
       -> ESP8266_DelayMs          0      0     20
       -> SendCmd                  0      0     24
       -> ESP8266_DelayMs          0      0     20
       -> SendCmd                  0      0     24
       -> ESP8266_DelayMs          0      0     20
       -> SendCmd                  0      0     24
       -> ESP8266_DelayMs          0      0     20
       -> SendCmd                  0      0     24
       -> ESP8266_DelayMs          0      0     20
       -> SendCmd                  0      0     24
       -> ESP8266_DelayMs          0      0     20
       -> SendCmd                  0      0     24
       -> ESP8266_DelayMs          0      0     20
       -> SendCmd                  0      0     24
     ESP8266_IntoAtCmd             0      0     22
       -> SendCmd                  0      0     24
     ESP8266_IntoCIPSEND           0      0     22
       -> ESP8266_IntoAtCmd        0      0     20
       -> ESP8266_DelayMs          0      0     20
       -> SendCmd                  0      0     24
       -> SendCmd                  0      0     24
     ESP8266_ReceiveData           0      0   1049
       -> HalUARTRead              0      0     18
     ESP8266_Rst                   0      0      0
     ESP8266_SendData              2      0   1040
       -> HalUARTWrite             4      0      0
     ESP8266_SendDataToService     0      0     10
       -> ESP8266_IntoCIPSEND      0      0     20
       -> ESP8266_DelayMs          0      0     20
       -> ESP8266_SendData         0      0     20
       -> ESP8266_DelayMs          0      0     20
     ESP8266_Test                  2      0      0
       -> ESP8266_Init             4      0      0
       -> ESP8266_DelayMs          4      0      0
     SendCmd                       2      0   1054
       -> ESP8266_ReceiveData      0      0   2080
       -> memset                   0      0   2084
       -> strlen                   0      0   2080
       -> ESP8266_SendData         0      0   2080
       -> ESP8266_DelayMs          0      0   2080
       -> ESP8266_ReceiveData      0      0   2080
       -> strlen                   0      0   2080
       -> strstr                   0      0   2080


   Segment part sizes:

     Function/Label                            Bytes
     --------------                            -----
     ESP8266_Rst                                  3
     ESP8266_Init1                              191
     ?Subroutine2                                 6
     ?Subroutine0                                 6
     ??Subroutine4_0                              5
     ?Subroutine3                                12
     SendCmd                                    285
     ESP8266_CheckStatus                         28
     ESP8266_SendData                            16
     ESP8266_ReceiveData                         27
     ?Subroutine1                                 5
     ESP8266_IntoAtCmd                           35
     ESP8266_IntoCIPSEND                         45
     ESP8266_DelayMs                             32
     ESP8266_SendDataToService                   43
     ESP8266_Test                                16
     ??ESP8266_Rst?relay                          6
     ??ESP8266_Init1?relay                        6
     ??SendCmd?relay                              6
     ??ESP8266_CheckStatus?relay                  6
     ??ESP8266_SendData?relay                     6
     ??ESP8266_ReceiveData?relay                  6
     ??ESP8266_IntoAtCmd?relay                    6
     ??ESP8266_IntoCIPSEND?relay                  6
     ??ESP8266_DelayMs?relay                      6
     ??ESP8266_SendDataToService?relay            6
     ??ESP8266_Test?relay                         6
     ?<Constant "AT\r\n">                         5
     ?<Constant "OK">                             3
     ?<Constant "AT+CWMODE=3\r\n">               14
     ?<Constant "AT+RST\r\n">                     9
     ?<Constant "AT+CWSAP=\"ljx\",\"12345...">   31
     ?<Constant "AT+CIPMUX=1\n">                 13
     ?<Constant "AT+CIPSTO=2880\n">              16
     ?<Constant "AT+CIPSERVER=1,8080\n">         21
     ?<Constant {48}>                          1024
     ?<Constant "AT+CIPSTATUS\r\n">              15
     ?<Constant "STATUS:3">                       9
     ?<Constant "+++">                            4
     ?<Constant "AT+CIPMODE=1\r\n">              15
     ?<Constant "AT+CIPSEND\r\n">                13
     ?<Constant ">">                              2

 
   755 bytes in segment BANKED_CODE
    66 bytes in segment BANK_RELAYS
 1 194 bytes in segment XDATA_ROM_C
 
   821 bytes of CODE  memory
 1 194 bytes of CONST memory

Errors: none
Warnings: 1
